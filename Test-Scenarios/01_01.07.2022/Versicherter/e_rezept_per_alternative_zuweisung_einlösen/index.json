{
  "id": "165b930c-d2d2-4f6f-b49d-5590352ee359",
  "mainActor": "Versicherter",
  "name": "E-Rezept per alternative Zuweisung einlösen",
  "tags": [
    "@Funktionalität=AlternZuweisung",
    "@Impl=done",
    "@Hauptdarsteller=Versicherter",
    "@TCID=ERP_EE_altZuweisung_01",
    "@Path=happy"
  ],
  "description": "Der Arzt verschreibt der GKV-Versicherten ein E-Rezept für ein apothekenpflichtiges Rezept.\n  Der Versicherte weist das E-Rezept seiner Apotheke über den Apothekendienstleister zu.",
  "feature": "Alternative Zuweisung",
  "featureFile": "alternative_zuweisung/alternative_Zuweisung.feature",
  "steps": [
    {
      "name": "Angenommen die Ärztin Dr. Schraßer hat Zugriff auf ihren HBA und auf die SMC-B der Praxis"
    },
    {
      "name": "Und die GKV Versicherte Sina Hüllmann hat Zugriff auf ihre eGK"
    },
    {
      "name": "Und die Apotheke Am Flughafen hat Zugriff auf ihre SMC-B"
    },
    {
      "name": "Und die Apotheke Am Flughafen verbindet sich mit seinem Apothekendienstleister"
    },
    {
      "name": "Am flughafen performable predicate"
    },
    {
      "name": "Wenn die Ärztin Dr. Schraßer der Versicherten Sina Hüllmann folgendes apothekenpflichtiges Medikament verschreibt:\n| Name | PZN |\n| Schmerzmittel | 12345678 |",
      "dumps": [
        {
          "operation": "POST /Task/$create",
          "file": "Versicherter/e_rezept_per_alternative_zuweisung_einlösen/0_Request_Parameters.xml"
        },
        {
          "operation": "Response 201: Task Task/160.000.006.300.857.70",
          "file": "Versicherter/e_rezept_per_alternative_zuweisung_einlösen/1_Response_Task.xml"
        },
        {
          "operation": "Document to sign with HBA 80276883110000095767 on Soft-Konn",
          "file": "Versicherter/e_rezept_per_alternative_zuweisung_einlösen/2_document_to_sign.xml"
        },
        {
          "operation": "Signed Document with HBA 80276883110000095767 on Soft-Konn",
          "file": "Versicherter/e_rezept_per_alternative_zuweisung_einlösen/3_signed_document.b64"
        },
        {
          "operation": "POST /Task/160.000.006.300.857.70/$activate",
          "file": "Versicherter/e_rezept_per_alternative_zuweisung_einlösen/4_Request_Parameters.xml"
        },
        {
          "operation": "Response 200: Task Task/160.000.006.300.857.70",
          "file": "Versicherter/e_rezept_per_alternative_zuweisung_einlösen/5_Response_Task.xml"
        },
        {
          "operation": "DMC for 160.000.006.300.857.70 with AccessCode d35c94e759b7fa80092b2687574ee39c687ee718019df31ac1e4ee8ea1b41a61",
          "file": "Versicherter/e_rezept_per_alternative_zuweisung_einlösen/6_dmc_160.000.006.300.857.70.png"
        }
      ]
    },
    {
      "name": "Und die Versicherte Sina Hüllmann für das letzte E-Rezept die alternative Zuweisung an die Apotheke Am Flughafen mit der Option Versand auslöst"
    },
    {
      "name": "Und die Apotheke Am Flughafen eine Nachricht mit einer alternativen Zuweisung vom Dienstleister empfängt und entschlüsselt"
    },
    {
      "name": "Am flughafen decrypt psp message"
    },
    {
      "name": "Und die Apotheke Am Flughafen das letzte zugewiesene E-Rezept beim Fachdienst akzeptiert",
      "dumps": [
        {
          "operation": "Response 200: Bundle Bundle/e1ddfd63-7fb2-4d7c-a753-c5b60a88ad03",
          "file": "Versicherter/e_rezept_per_alternative_zuweisung_einlösen/7_Response_Bundle.xml"
        }
      ]
    },
    {
      "name": "Und die Apotheke Am Flughafen das letzte akzeptierte E-Rezept korrekt an Sina Hüllmann dispensiert",
      "dumps": [
        {
          "operation": "POST /Task/160.000.006.300.857.70/$close?secret=a50b169b63f1fa3c3e29abc230491a8c4bb0ceaab354c4f4a8087fff1d8011b0",
          "file": "Versicherter/e_rezept_per_alternative_zuweisung_einlösen/8_Request_MedicationDispense.xml"
        },
        {
          "operation": "Response 200: Bundle Bundle/a0b92460-0000-0000-0003-000000000000",
          "file": "Versicherter/e_rezept_per_alternative_zuweisung_einlösen/9_Response_Bundle.xml"
        }
      ]
    },
    {
      "name": "Dann hat die Apotheke Am Flughafen genau 1 Quittung vorliegen"
    },
    {
      "name": "Am flughafen performable predicate"
    },
    {
      "name": "Und hat der Versicherte Sina Hüllmann genau 1 Medikament erhalten"
    },
    {
      "name": "Sina hüllmann performable predicate"
    }
  ]
}
