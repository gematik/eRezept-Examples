{
  "id" : "e12b9c2b-85dd-471a-af35-4d2db6a87b0a",
  "mainActor" : "Apotheke",
  "name" : "Löschen mit falschem Secret nicht möglich",
  "tags" : [ "@PRODUKT:eRp_FD", "@Workflow:160", "@Versicherung:GKV", "@AFO-ID:A_18827", "@AFO-ID:A_18502", "@AFO-ID:A_18503", "@TCID:ERP_EE_WF160_18", "@TESTFALL:negativ", "@AFO-ID:A_19224", "@Hauptdarsteller:Apotheke" ],
  "description" : "Der Fachdienst muss beim Löschen das mitgelieferte Secret prüfen und bei ungültigem Secret die HTTP-POST-Operation\n  über /Task/<id>/$abort ablehnen.",
  "feature" : "Apothekenpflichtige Medikamente für GKV-Versicherte",
  "featureFile" : "GKV_WF_160/GKV-Versicherter_WF_160",
  "steps" : [ {
    "name" : "Angenommen die Ärztin Dr. Schraßer hat Zugriff auf ihren HBA und auf die SMC-B der Praxis"
  }, {
    "name" : "Und die GKV Versicherte Sina Hüllmann hat Zugriff auf ihre eGK"
  }, {
    "name" : "Und die Apotheke Am Flughafen hat Zugriff auf ihre SMC-B"
  }, {
    "name" : "Und die Apotheke Stadtapotheke hat Zugriff auf ihre SMC-B"
  }, {
    "name" : "Wenn die Ärztin Dr. Schraßer der Versicherten Sina Hüllmann folgendes apothekenpflichtiges Medikament verschreibt:\n| Name | PZN |\n| Schmerzmittel | 12345678 |",
    "dumps" : [ {
      "operation" : "POST /Task/$create",
      "file" : "Apotheke/löschen_mit_falschem_secret_nicht_möglich/000_Request_Parameters.xml"
    }, {
      "operation" : "Response 201: Task Task/160.000.006.420.718.66",
      "file" : "Apotheke/löschen_mit_falschem_secret_nicht_möglich/001_Response_Task.xml"
    }, {
      "operation" : "Document to sign with HBA 80276883110000095767 on Soft-Konn",
      "file" : "Apotheke/löschen_mit_falschem_secret_nicht_möglich/002_document_to_sign.xml"
    }, {
      "operation" : "Signed Document with HBA 80276883110000095767 on Soft-Konn",
      "file" : "Apotheke/löschen_mit_falschem_secret_nicht_möglich/003_signed_document.b64"
    }, {
      "operation" : "POST /Task/160.000.006.420.718.66/$activate",
      "file" : "Apotheke/löschen_mit_falschem_secret_nicht_möglich/004_Request_Parameters.xml"
    }, {
      "operation" : "Response 200: Task Task/160.000.006.420.718.66",
      "file" : "Apotheke/löschen_mit_falschem_secret_nicht_möglich/005_Response_Task.xml"
    }, {
      "operation" : "DMC for 160.000.006.420.718.66 with AccessCode f1a1fd77e2387bdd243eafd4ee8da77ea364e84a72c9fda5d9ae8fc9c41c286c",
      "file" : "Apotheke/löschen_mit_falschem_secret_nicht_möglich/006_dmc_160.000.006.420.718.66.png"
    } ]
  }, {
    "name" : "Und die Versicherte Sina Hüllmann ihr letztes ausgestellte E-Rezept der Apotheke Am Flughafen via Data Matrix Code zuweist"
  }, {
    "name" : "Und die Apotheke Am Flughafen das letzte zugewiesene E-Rezept beim Fachdienst akzeptiert",
    "dumps" : [ {
      "operation" : "Response 200: Bundle Bundle/7b7a8a93-b6b0-40ac-996b-b32cf398b9e3",
      "file" : "Apotheke/löschen_mit_falschem_secret_nicht_möglich/007_Response_Bundle.xml"
    } ]
  }, {
    "name" : "Dann kann die Apotheke Am Flughafen das letzte akzeptierte E-Rezept nicht mit dem falschen Secret fgdkjfgd löschen"
  }, {
    "name" : "Am flughafen check the return code",
    "dumps" : [ {
      "operation" : "Response 403: OperationOutcome 20231127_082840",
      "file" : "Apotheke/löschen_mit_falschem_secret_nicht_möglich/008_Response_OperationOutcome.xml"
    } ]
  }, {
    "name" : "Am flughafen performable predicate"
  }, {
    "name" : "Dann kann die Apotheke Am Flughafen das letzte akzeptierte E-Rezept korrekt dispensieren",
    "dumps" : [ {
      "operation" : "POST /Task/160.000.006.420.718.66/$close?secret=992d2225e9094c5f88549338539253764c154463147272ee446793f8b82fdb97",
      "file" : "Apotheke/löschen_mit_falschem_secret_nicht_möglich/009_Request_MedicationDispense.xml"
    }, {
      "operation" : "Response 200: Bundle Bundle/a0eef861-0000-0000-0003-000000000000",
      "file" : "Apotheke/löschen_mit_falschem_secret_nicht_möglich/010_Response_Bundle.xml"
    } ]
  } ],
  "requirements" : [ "A_18827", "A_18502", "A_18503", "A_19224" ]
}